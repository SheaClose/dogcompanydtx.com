"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var app=angular.module("app",["ui.router"]).config(["$stateProvider","$urlRouterProvider","$compileProvider",function(t,e,r){r.debugInfoEnabled(!1),e.otherwise("/"),t.state("home",{url:"/",templateUrl:"./views/homeTmpl.html",controller:"homeCtrl"}).state("store",{url:"/store",templateUrl:"./views/storeTmpl.html",controller:"storeCtrl"}).state("product",{url:"/product/:id",templateUrl:"./views/productTmpl.html",controller:"productCtrl"}).state("shows",{url:"/shows",templateUrl:"./views/showsTmpl.html",controller:"showsCtrl"}).state("about",{url:"/about",templateUrl:"./views/aboutTmpl.html",controller:"aboutCtrl"}).state("media",{url:"/media",templateUrl:"./views/mediaTmpl.html",controller:"mediaCtrl"}).state("admin",{url:"/admin/:adminId/:pass",controller:"adminCtrl",templateUrl:"./views/adminTmpl.html"}).state("cart",{url:"/cart",controller:"cartCtrl",templateUrl:"./views/cartTmpl.html"})}]).directive("navBar",function(){return{templateUrl:"./views/navbar.html",scope:{user:"="},controller:["$http","$scope",function(t,e){t.get("/api/cart").then(function(t){e.user=t.data.pop()})}]}});!function(t,e,r,o,n,i,a){t.GoogleAnalyticsObject=n,t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},t[n].l=1*new Date,i=e.createElement(r),a=e.getElementsByTagName(r)[0],i.async=1,i.src=o,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-93904885-1","auto"),ga("send","pageview"),angular.module("app").controller("aboutCtrl",["$scope",function(){angular.element(document).ready(function(){$(window).on("scroll",function(){function t(){var t=$(window).scrollTop()/$(window).height();return.85>t?t:.85}var e=$(window).scrollTop();$(".about-page-container").css("background-size",70+parseInt(e/3)+"vh"),$(".about-page-content-container").css("background-color","rgba(0,0,0, "+t()+")")}),function(){function t(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function e(){for(var e=0;e<r.length;e++)t(r[e])?r[e].classList.add("in-view"):r[e].classList.remove("in-view")}var r=document.querySelectorAll(".timeline li");window.addEventListener("load",e),window.addEventListener("resize",e),window.addEventListener("scroll",e)}()})}]),app.controller("adminCtrl",["$scope","adminService","$state","$location",function(t,e,r,o){function n(r,o){e.checkPass(r,o).then(function(e){t.userIsAdmin="false"!==e.data})}angular.element(document).ready(function(){$(document).ready(function(){$(".collapsible").collapsible({accordion:!1})})}),t.userIsAdmin=!1,r.params.adminId&&r.params.pass?n(r.params.adminId,r.params.pass):o.path("/"),t.submitNewProduct=function(){if(void 0===t.title||void 0===t.price)return alert("Please ensure the title and price fields are complete");var r={title:t.title,description:t.description,price:t.price,category:t.category,color:t.color,imgUrl:t.imgUrl,url:t.url,size:t.size};e.submitNewProduct(r).then(function(){t.title="",t.description="",t.price="",t.category="",t.color="",t.imgUrl="",t.url="",t.size=""})},t.editProduct=function(){var r={objId:t.objId};t.title&&(r.title=t.title),t.description&&(r.description=t.description),t.price&&(r.price=t.price),t.category&&(r.category=t.category),t.color&&(r.color=t.color),t.imgUrl&&(r.imgUrl=t.imgUrl),t.url&&(r.url=t.url),t.size&&(r.size=t.size),e.editProduct(r).then(function(e){200==e.status&&(t.title="",t.description="",t.price="",t.category="",t.color="",t.imgUrl="",t.url="",t.size="",t.objId="")})},t.deleteProduct=function(r){e.deleteProduct(r).then(function(e){200==e.status&&(t.objId="")})},t.addBlogPost=function(r,o,n){var i={title:o,body:r,imgUrl:n};e.addBlogPost(i).then(function(e){200==e.status&&(t.body="",t.title="",t.imgUrl="")})},t.editBlogPost=function(r,o,n){blogObj={title:n,body:o,objId:r},e.editBlogPost(blogObj).then(function(e){200==e.status&&(t.body="",t.title="",t.objId="")})},t.deleteBlog=function(r){e.deleteBlog(r).then(function(){t.objId=""})}}]),app.service("adminService",["$http",function(t){this.submitNewProduct=function(e){return t.post("/api/products",e)},this.editProduct=function(e){return t.put("/api/products/"+e.objId,e)},this.deleteProduct=function(e){return t.delete("/api/products/"+e)},this.addBlogPost=function(e){return t.post("/api/blogs",e)},this.editBlogPost=function(e){return t.put("/api/blogs/"+e.objId,e)},this.deleteBlog=function(e){return t.delete("/api/blogs/"+e)},this.checkPass=function(e,r){return t.get("/api/admin/?user="+e+"&pass="+r)}}]),app.controller("cartCtrl",["$scope","$window","cartService",function(t,e,r){angular.element(document).ready(function(){$(window).on("scroll",function(){function t(){var t=$(window).scrollTop()/$(window).height();return.85>t?t:.85}var e=$(window).scrollTop();$(".Store-page-container").css("background-size",125+parseInt(e/3)+"vh"),$(".Store-page-content-container").css("background-color","rgba(0,0,0, "+t()+")")}),$(".modal-trigger").leanModal()}),t.unitedStatesAddress=!0;var o=function(e){r.fillCart(e).then(function(e){t.cart=[],e.data.cart.forEach(function(e){var r={product:e.product,quantity:e.quantity,total:e.quantity*e.product.price};t.cart.push(r)}),i()})};t.click=function(){t.unitedStatesAddress=!t.unitedStatesAddress};var n=function(){r.getCart().then(function(e){e.data.forEach(function(e){t.user=e,o(t.user._id)})})};t.increaseQuantity=function(e){t.cart.forEach(function(t){t.product._id===e&&(t.quantity+=1,t.total=t.quantity*t.product.price)}),i()},t.decreaseQuantity=function(e){t.cart.forEach(function(t){t.product._id===e&&t.quantity>1&&(t.quantity-=1,t.total=t.quantity*t.product.price)}),i()};var i=function(){t.total=0,t.cart.forEach(function(e){t.total+=e.total})};t.removeFromCart=function(e){r.removeFromCart(e,t.user._id).then(function(){n()})},t.submitOrder=function(){var o={};if(t.unitedStatesAddress){if(void 0===t.first_name||void 0===t.last_name||void 0===t.email||void 0===t.street||void 0===t.city||void 0===t.state||void 0===t.zipcode)return alert("Please ensure all fields are complete. We can not complete your order without this information.\n\n					If you are having trouble completing an order, Please contact us at DogCompanyDtx@gmail.com"),void 0;o={first_name:t.first_name,last_name:t.last_name,email:t.email,street:t.street,city:t.city,state:t.state,zipcode:t.zipcode}}else o={first_name:t.first_name,last_name:t.last_name,email:t.email,nonUSAddress:t.nonUsAddress};var n={cart:t.cart,total:t.total,user:o};r.submitOrder(n).then(function(t){window.currentUserOrderInformation=t.data,r.deleteUser().then(function(){e.location.hash="#!/store"})})},n()}]),app.service("cartService",["$http",function(t){this.fillCart=function(e){return t.get("/api/cart/"+e)},this.getCart=function(){return t.get("/api/cart")},this.removeFromCart=function(e,r){return t.put("/api/cart/deleteItem/"+r,{_id:e})},this.submitOrder=function(e){return t.post("/api/order",e)},this.deleteUser=function(){return t.delete("/api/User")}}]),app.controller("homeCtrl",["$scope","homeService",function(t,e){angular.element(document).ready(function(){$(window).on("scroll",function(){function t(){var t=$(window).scrollTop()/$(window).height();return.85>t?t:.85}var e=$(window).scrollTop();$(".Home-page-container").css("background-size",125+parseInt(e/5,0)+"vh"),$(".home-page-content-container").css("background-color","rgba(0,0,0, "+t()+")")})});var r=function(){e.getBlogs().then(function(e){t.blogs=e})};r()}]),app.service("homeService",["$http",function(t){this.getBlogs=function(){return t.get("/api/blogs").then(function(t){t.data.sort(function(t,e){return t.date<e.date});var e=[];return t.data.forEach(function(t,r,o){e.push(o[r])}),e})}}]),angular.module("app").controller("mediaCtrl",["$scope",function(){angular.element(document).ready(function(){$(window).on("scroll",function(){function t(){var t=$(window).scrollTop()/$(window).height();return.85>t?t:.85}var e=$(window).scrollTop();$(".media-page-container").css("background-size",80+parseInt(e/3)+"vw"),$(".media-page-content-container").css("background-color","rgba(0,0,0, "+t()+")")})})}]),app.controller("showsCtrl",["$scope","$window","showsService",function(t,e,r){angular.element(document).ready(function(){$(window).on("scroll",function(){function t(){var t=$(window).scrollTop()/$(window).height()*1.25;return.85>t?t:.85}var e=$(window).scrollTop();$(".shows-page-container").css("background-size",125+parseInt(e/3)+"vh"),$(".shows-page-content-container").css("background-color","rgba(0,0,0, "+t()+")")})});var o=function(){r.getShows().then(function(e){var r=e.data.slice(1,49);t.shows=r.reverse()})};t.goToThere=function(t){e.location.href=t},o()}]),app.service("showsService",["$http",function(t){this.getShows=function(){return t.get("/api/shows")}}]),app.controller("productCtrl",["$scope","$state","storeService",function(t,e,r){angular.element(document).ready(function(){$(".carousel").carousel(),$("select").material_select();$(window).on("scroll",function(){function t(){var t=$(window).scrollTop()/$(window).height();return.85>t?t:.85}var e=$(window).scrollTop();$(".Store-page-container").css("background-size",125+parseInt(e/3)+"vh"),$(".Store-page-content-container").css("background-color","rgba(0,0,0, "+t()+")")})}),t.toggle=!1,t.img2Toggle=!1,t.sizes={small:!1,medium:!1,large:!1,xLarge:!1,xxLarge:!1,xxxLarge:!1},r.getAllProducts().then(function(r){var o=r.data;o.forEach(function(r){if(r.title===e.params.id){for(var o in t.sizes){o===r.size&&(t.sizes[o]=r.available)}t.product={_id:r._id,category:r.category,color:r.color,description:r.description,imgUrl:r.imgUrl,price:r.price,title:r.title,options:r.options},r.imgUrl2&&(t.product.imgUrl2=r.imgUrl2,t.img2Toggle=!0),r.imgUrl3&&(t.product.imgUrl3=r.imgUrl3),"merch"!==r.category&&(t.product.size=r.size),"merch"==r.category&&(t.toggle=!0)}})}),t.addToCart=function(e,o,n){r.addToCart(e,o||"small",n).then(function(e){t.user=e.data})}}]),app.controller("storeCtrl",["$scope","$state","storeService",function(t,e,r){angular.element(document).ready(function(){$(window).on("scroll",function(){function t(){var t=$(window).scrollTop()/$(window).height();return.85>t?t:.85}var e=$(window).scrollTop();$(".Store-page-container").css("background-size",125+parseInt(e/3)+"vh"),$(".Store-page-content-container").css("background-color","rgba(0,0,0, "+t()+")")})}),t.nonUSAddress=!1;var o=function(){r.getAllProducts().then(function(e){var r=e.data.reduce(function(t,e){return t.includes(e.title)?t:[].concat(_toConsumableArray(t),[e.title])},[]).map(function(t){var r=e.data.find(function(e){return t==e.title&&e.available});return r?r:null}).filter(Boolean),o=r.filter(function(t){return"apparel"==t.category}),n=r.filter(function(t){return"merch"==t.category}),i=r.filter(function(t){return"bundle"==t.category});t.products=[].concat(_toConsumableArray(o),_toConsumableArray(n),_toConsumableArray(i))})};t.goTo=function(t){e.go("product",{id:t})},o(),window.currentUserOrderInformation&&(window.currentUserOrderInformation.user.nonUSAddress&&(t.nonUSAddress=!0),t.currentUserOrderInformation=window.currentUserOrderInformation,$("#modal1").openModal(),window.currentUserOrderInformation=null)}]),app.service("storeService",["$http",function(t){var e=this;this.products=[],this.getAllProducts=function(){return t.get("/api/products").then(function(t){return e.products=t.data,t})},this.addToCart=function(e,r,o){return t.post("/api/cart",{title:e,size:r,bundle:o})}}]),app.directive("apparelDir",function(){return{templateUrl:"./views/apparelTmpl.html",scope:{add:"&",product:"=",sizes:"="}}}),app.directive("bundleDir",["storeService",function(t){return{templateUrl:"./views/bundleTmpl.html",scope:{add:"&",product:"=",sizes:"="},controller:["$scope",function(e){e.product.options.includes("shirts")&&(e.product.designs=t.products.filter(function(t){return"apparel"==t.category}).map(function(t){return t.title}).filter(function(t,e,r){return r.indexOf(t)==e})),e.product.options.includes("albums")&&(e.product.albums=["Songs of Discontent - cd","War Stories - Album"]),e.$watch("selectedDesign",function(){var r=["small","medium","large","xLarge","xxLarge","xxxLarge"],o=t.products.filter(function(t){return t.title==e.selectedDesign}).filter(function(t){return t.available}).map(function(t){return t.size});e.product.sizes=r.filter(function(t){return o.includes(t)})})}]}}]),app.directive("merchDir",function(){return{templateUrl:"./views/merchTmpl.html",scope:{add:"&",product:"=",sizes:"="}}});